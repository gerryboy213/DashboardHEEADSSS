<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Signup</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='admin_signup.css') }}">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
      .input-style {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
    }

      .password-container {
          position: relative;
          display: flex;
          flex-direction: column; /* Ensure the warning message is below the input field */
        margin-bottom: 10px;
      }
  
      .password-container input {
        width: 100%;
        padding: 10px;
        padding-right: 30px; /* Space for the eye icon */
        box-sizing: border-box;
    }
  
    .password-container i {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
  }

  .input-icon-wrapper {
    position: relative;
    width: 100%;
  }
  
  .input-icon-wrapper input {
    width: 100%;
    padding: 10px;
    padding-right: 30px; /* Leave room for the eye icon */
    box-sizing: border-box;
  }
  
  .input-icon-wrapper i {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
  }

  .warning-message {
    color: red;
    font-size: 0.75rem;
    display: none;
    margin-top: 0;
}
  </style>
  
</head>
<body>
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    
        <div class="signup-container">

            <div class="back-btn">
                <button onclick="window.location.href='{{ url_for('admin') }}'">
                    <i class="fas fa-arrow-left"></i> Back
                </button>       
            </div>

            <form method="POST" action="{{ url_for('admin_signup') }}" class="signup-form" onsubmit="return checkPasswordMatch(event)">
              <h2>Admin Sign Up</h2>
            
              <div class="input-group">
                <input type="text" name="new_username" placeholder="Username" required class="input-style">
              </div>
            
              <div class="password-container">
                <input type="password" name="new_password" id="new_password" placeholder="Password" required>
                <i class="fas fa-eye-slash" id="togglePassword" style="cursor: pointer;"></i>
              </div>
            
              <div class="password-container">
                <div class="input-icon-wrapper">
                  <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm Password" required>
                  <i class="fas fa-eye-slash" id="toggleConfirmPassword"></i>
                </div>
              </div>
            
              <div class="address-row">
                <div class="input-group">
                  <label class="form-label">Region *</label>
                  <select name="region" id="region" required title="Please select a region."></select>
                </div>
            
                <div class="input-group">
                  <label class="form-label">Province *</label>
                  <select name="province" id="province" required title="Please select a province."></select>
                </div>
            
                <div class="input-group">
                  <label class="form-label">City / Municipality *</label>
                  <select name="city" id="city" required title="Please select a city or municipality."></select>
                </div>

                
              </div>

              <div class="address-row center-name-row">
                <div class="input-group center-name-group">
                  <label class="form-label" for="centerName">Center Name *</label>
                  <input type="text" name="centerName" id="centerName" required placeholder="Enter Center Name">
                </div>
              </div>
              
              <button type="submit" class="signup-btn">Sign Up</button>
            
              <p class="login-link">Already have an account?
                <a href="{{ url_for('admin_login') }}">Login here</a>
              </p>
            </form>
            

          </div>
          
          
          <script>
            // Toggle password visibility for main password
            const togglePassword = document.getElementById('togglePassword');
            const password = document.getElementById('new_password'); // <-- fixed here
        
            togglePassword.addEventListener('click', function () {
                const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                password.setAttribute('type', type);
                this.classList.toggle('fa-eye');
                this.classList.toggle('fa-eye-slash');
            });
        
            // Toggle password visibility for confirm password
            const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
            const confirmPassword = document.getElementById('confirm_password');
        
            toggleConfirmPassword.addEventListener('click', function () {
                const type = confirmPassword.getAttribute('type') === 'password' ? 'text' : 'password';
                confirmPassword.setAttribute('type', type);
                this.classList.toggle('fa-eye');
                this.classList.toggle('fa-eye-slash');
            });
        </script>
        
          
        <script>
          function checkPasswordMatch(event) {
            const password = document.getElementById("new_password").value;
            const confirmPassword = document.getElementById("confirm_password").value;
        
            // Reset previous highlights
            document.getElementById("confirm_password").style.border = "";
        
            // Check if passwords match
            if (password !== confirmPassword) {
              // Prevent form submission
              event.preventDefault();
        
              // Highlight the confirm password field with a red border
              document.getElementById("confirm_password").style.border = "2px solid red";
              
              return false;
            }
        
            return true;
          }
        </script>
        
        
        

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        const regionUrl = "{{ url_for('static', filename='ph-json/region.json') }}";
        const barangayUrl = "{{ url_for('static', filename='ph-json/barangay.json') }}";
        const provinceUrl = "{{ url_for('static', filename='ph-json/province.json') }}";
        const cityUrl = "{{ url_for('static', filename='ph-json/city.json') }}";
    </script>

    <script src="{{ url_for('static', filename='js/ph-address-selector.js') }}"></script>
</body>
</html>
